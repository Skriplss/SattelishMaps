<!DOCTYPE html>
<html lang="sk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SattelishMaps</title>

    <!-- MapTiler SDK -->
    <script src="https://cdn.maptiler.com/maptiler-sdk-js/v2.0.3/maptiler-sdk.umd.js"></script>
    <link href="https://cdn.maptiler.com/maptiler-sdk-js/v2.0.3/maptiler-sdk.css" rel="stylesheet" />

    <!-- Styles -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/map.css">
</head>

<body>


    <!-- Left Sidebar -->
    <aside id="left-panel">
        <!-- Menu Button (opens filters) -->
        <button class="sidebar-btn" id="menu-btn" title="Filtre">
            <span class="icon">‚ò∞</span>
            <span class="label" data-i18n="menu.filters">Filtre</span>
        </button>

        <!-- Filters Panel (expands down inside sidebar) -->
        <div id="filters-panel" class="filters-dropdown">
            <div class="filters-content">
                <div class="filter-section">
                    <label data-i18n="filters.layers">Satelitn√° vrstva</label>
                    <div class="layer-toggle">
                        <button class="layer-btn" data-layer="ndvi" data-i18n="filters.ndvi">NDVI</button>
                        <button class="layer-btn" data-layer="ndwi" data-i18n="filters.ndwi">NDWI</button>
                    </div>
                </div>

                <!-- Placeholder for future filters -->
                <div class="filter-section filter-placeholder">
                    <small style="color: var(--text-secondary); font-style: italic;" data-i18n="filters.placeholder">
                        Miesto pre bud√∫ce filtre...
                    </small>
                </div>

                <!-- Area Selection Button (Visible only when layer active) -->
                <button class="sidebar-btn hidden" id="select-area-btn" title="V√Ωber oblasti" style="margin-top: 15px;">
                    <span class="icon">‚¨ö</span>
                    <span class="label" data-i18n="filters.select_area">Vybra≈• oblas≈•</span>
                </button>
            </div>
        </div>


        <!-- Bottom Buttons (fixed at bottom) -->
        <div class="sidebar-bottom-buttons">
            <!-- Language Toggle -->
            <button class="sidebar-btn" id="lang-btn" title="Jazyk">
                <span class="icon lang-flag">
                    <img src="assets/images/sk-flag.png" style="height: 20px;">
                </span>
                <span class="label" id="lang-label" data-i18n="menu.language">SK</span>
            </button>

            <!-- Theme Toggle -->
            <button class="sidebar-btn" id="theme-btn" title="T√©ma">
                <span class="icon theme-icon">üåô</span>
                <span class="label" data-i18n="menu.theme">T√©ma</span>
            </button>

            <!-- Info Button -->
            <button class="sidebar-btn" id="info-btn" title="Info">
                <span class="icon">‚ÑπÔ∏è</span>
                <span class="label" data-i18n="menu.info">Info</span>
            </button>
        </div>
    </aside>

    <!-- Fullscreen Map -->
    <div id="map"></div>

    <!-- Date/Time Control Panel (on map, DeepState style) -->
    <div id="datetime-control">
        <!-- Logo and Title -->
        <div class="dt-logo">
            <img src="assets/images/logo.png" alt="Logo" class="dt-logo-img">
            <div class="dt-logo-text">
                <strong>Satellish</strong>
                <small>Maps</small>
            </div>
        </div>

        <!-- Date Controls -->
        <div class="dt-controls-group">
            <button class="dt-btn" id="play-btn">‚ñ∂</button>
            <button class="dt-btn" id="speed-btn">1x</button>
            <input type="date" class="dt-date" id="map-date" value="2024-12-05">
            <button class="dt-nav">‚óÄ</button>
            <button class="dt-nav">‚ñ∂</button>
        </div>
    </div>

    <!-- Zoom Controls -->
    <div id="zoom-controls">
        <button id="zoom-in" class="zoom-btn">+</button>
        <button id="zoom-out" class="zoom-btn">‚àí</button>
    </div>

    <!-- Info Modal -->
    <div id="info-modal" class="modal hidden">
        <div class="modal-content">
            <button class="modal-close" id="close-info">√ó</button>
            <h2>SattelishMaps</h2>
            <p>Vizualiz√°cia satelitn√Ωch d√°t Sentinel-2.5</p>
            <p><strong>T√≠m:</strong> V-Axis</p>
            <p><strong>Verzia:</strong> 1.0.0</p>
        </div>
    </div>

    <!-- Loader -->
    <div id="loader" class="loader hidden">
        <div class="spinner"></div>
        <p>Naƒç√≠tavanie...</p>
    </div>

    <!-- Legend Container -->
    <div id="legend-container" class="legend-panel hidden"></div>

    <!-- Area Selection Cursor -->
    <div id="area-selection-cursor" class="hidden"></div>

    <!-- Statistics Panel -->
    <div id="stats-panel" class="stats-panel">
        <div class="stats-header">
            <h3 data-i18n="stats.title">Anal√Ωza oblasti</h3>
            <button id="close-stats" class="close-btn">√ó</button>
        </div>

        <div class="stats-controls">
            <div class="date-input-group">
                <label data-i18n="stats.date_from">Od:</label>
                <input type="date" id="stats-date-from" value="2024-01-01">
            </div>
            <div class="date-input-group">
                <label data-i18n="stats.date_to">Do:</label>
                <input type="date" id="stats-date-to" value="2024-12-31">
            </div>
        </div>

        <div class="chart-container">
            <canvas id="ndvi-chart"></canvas>
        </div>

        <div class="ai-analysis-container">
            <h4 data-i18n="stats.ai_title">AI Anal√Ωza</h4>
            <div class="ai-text-box" id="ai-analysis-text" data-i18n="stats.loading_analysis">
                Naƒç√≠tavam anal√Ωzu...
            </div>
        </div>

        <!-- Export Section -->
        <div class="export-section">
            <button id="export-btn" class="export-btn" data-i18n="stats.export_btn">
                Stiahnu≈•
            </button>
            <div id="export-dropdown" class="export-dropdown">
                <button class="export-option" id="export-chart" data-i18n="stats.export_chart">Stiahnu≈• graf</button>
                <button class="export-option" id="export-text" data-i18n="stats.export_text">Stiahnu≈• text</button>
            </div>
        </div>
    </div>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Scripts -->
    <script src="js/translations.js"></script>
    <script src="js/api.js"></script>
    <script src="js/map.js"></script>
    <script src="js/layers.js"></script>
    <script src="js/selection.js"></script>
    <script src="js/stats.js"></script>
    <script src="js/main.js"></script>
</body>

</html>