# üì° –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é API –º–æ–¥—É–ª—è

## üéØ –ß—Ç–æ –º—ã —Å–æ–∑–¥–∞–ª–∏

–ú–æ–¥—É–ª—å `api.js` - —ç—Ç–æ —Ç–≤–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (–≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞)

–û—Ç–∫—Ä–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—É http://localhost:8000, –Ω–∞–∂–º–∏ **F12**, –ø–µ—Ä–µ–π–¥–∏ –≤ **Console** –∏ –ø–æ–ø—Ä–æ–±—É–π:

### 1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

```javascript
// –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (–±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤)
const data = await SatelliteAPI.fetchSatelliteData({});
console.log(data);
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏:**
- –í –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è "üì° Fetching satellite data..."
- –ß–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É –ø–æ—è–≤–∏—Ç—Å—è –º–∞—Å—Å–∏–≤ —Å 2 —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã–º–∏ —Å–Ω–∏–º–∫–∞–º–∏
- –ö–∞–∂–¥—ã–π —Å–Ω–∏–º–æ–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç: –¥–∞—Ç—É, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –æ–±–ª–∞—á–Ω–æ—Å—Ç—å, —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

### 2. –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –æ–±–ª–∞—á–Ω–æ—Å—Ç–∏

```javascript
// –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å–Ω–∏–º–∫–∏ —Å –æ–±–ª–∞—á–Ω–æ—Å—Ç—å—é –º–µ–Ω—å—à–µ 10%
const clearData = await SatelliteAPI.fetchSatelliteData({}, {}, 10);
console.log(clearData);
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏:**
- –í–µ—Ä–Ω–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ 1 —Å–Ω–∏–º–æ–∫ (—Å –æ–±–ª–∞—á–Ω–æ—Å—Ç—å—é 5%)

---

### 3. –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

```javascript
// –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –æ–±–ª–∞—Å—Ç–∏
const stats = await SatelliteAPI.fetchStatistics({});
console.log(stats);
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏:**
- –í–µ—Ä–Ω–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π:
  - –°—Ä–µ–¥–Ω–∏–π NDVI (–∏–Ω–¥–µ–∫—Å —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
  - –ü–ª–æ—â–∞–¥—å
  - –ü—Ä–æ—Ü–µ–Ω—Ç –ª–µ—Å–∞, —Å–µ–ª—å—Ö–æ–∑ –∑–µ–º–µ–ª—å, –≥–æ—Ä–æ–¥–æ–≤, –≤–æ–¥—ã

---

### 4. –ü–æ–∏—Å–∫ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º

```javascript
// –ù–∞–π—Ç–∏ —Å–Ω–∏–º–∫–∏ —Ä—è–¥–æ–º —Å –ë—Ä–∞—Ç–∏—Å–ª–∞–≤–æ–π
const nearBratislava = await SatelliteAPI.searchByCoordinates(48.1486, 17.1077, 50);
console.log(nearBratislava);
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏:**
- –í–µ—Ä–Ω—É—Ç—Å—è —Å–Ω–∏–º–∫–∏ –≤ —Ä–∞–¥–∏—É—Å–µ 50–∫–º –æ—Ç –ë—Ä–∞—Ç–∏—Å–ª–∞–≤—ã

---

## üí° –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–¥–µ –∫–∞—Ä—Ç—ã

### –ü—Ä–∏–º–µ—Ä 1: –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–∞—Ä—Ç—É

–î–æ–±–∞–≤—å –≤ `map.js` –≤ –º–µ—Ç–æ–¥ `setupEventListeners`:

```javascript
this.map.on('click', async (e) => {
    console.log('üìç Map click:', e.lngLat);
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
    this.showLoader();
    
    try {
        // –ò—â–µ–º —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Ä—è–¥–æ–º —Å –∫–ª–∏–∫–æ–º
        const data = await SatelliteAPI.searchByCoordinates(
            e.lngLat.lat,
            e.lngLat.lng,
            10 // —Ä–∞–¥–∏—É—Å 10–∫–º
        );
        
        console.log('–ù–∞–π–¥–µ–Ω–æ —Å–Ω–∏–º–∫–æ–≤:', data.length);
        
        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å popup —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
        if (data.length > 0) {
            alert(`–ù–∞–π–¥–µ–Ω–æ ${data.length} —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã—Ö —Å–Ω–∏–º–∫–æ–≤!`);
        } else {
            alert('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç—Ç–æ–π –æ–±–ª–∞—Å—Ç–∏');
        }
        
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞:', error);
        alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö');
    } finally {
        // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
        this.hideLoader();
    }
});
```

---

### –ü—Ä–∏–º–µ—Ä 2: –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤

–î–æ–±–∞–≤—å –≤ `main.js` –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "Pou≈æi≈•":

```javascript
// –ù–∞–π–¥–∏ –∫–Ω–æ–ø–∫—É –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
const applyBtn = document.querySelector('.apply-filters-btn');

if (applyBtn) {
    applyBtn.addEventListener('click', async () => {
        console.log('üîç Applying filters...');
        
        // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
        const dateFrom = document.getElementById('date-from').value;
        const dateTo = document.getElementById('date-to').value;
        const cloudCoverage = document.getElementById('cloud-slider').value;
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
        satelliteMap.showLoader();
        
        try {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
            const data = await SatelliteAPI.fetchSatelliteData(
                {}, // bounds (–ø–æ–∫–∞ –ø—É—Å—Ç—ã–µ)
                { from: dateFrom, to: dateTo },
                parseInt(cloudCoverage)
            );
            
            console.log('‚úÖ Loaded:', data.length, 'images');
            
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ –∫–∞—Ä—Ç–µ
            // (—ç—Ç–æ –±—É–¥–µ—Ç –≤ —Å–ª–µ–¥—É—é—â–µ–º —ç—Ç–∞–ø–µ - layers.js)
            
        } catch (error) {
            console.error('‚ùå Error:', error);
        } finally {
            satelliteMap.hideLoader();
        }
    });
}
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –°–ø—É—Ç–Ω–∏–∫–æ–≤—ã–π —Å–Ω–∏–º–æ–∫ (SatelliteData):

```javascript
{
    id: 'sentinel-2-001',           // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
    date: '2024-12-01',              // –î–∞—Ç–∞ —Å—ä–µ–º–∫–∏
    coordinates: {                   // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ü–µ–Ω—Ç—Ä–∞
        lat: 48.6692,
        lng: 19.6987
    },
    bounds: {                        // –ì—Ä–∞–Ω–∏—Ü—ã —Å–Ω–∏–º–∫–∞
        north: 49.0,
        south: 48.0,
        east: 20.0,
        west: 19.0
    },
    cloudCoverage: 15,               // –û–±–ª–∞—á–Ω–æ—Å—Ç—å (0-100)
    bands: {                         // –°—Å—ã–ª–∫–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        rgb: 'url...',               // –û–±—ã—á–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        nir: 'url...',               // –ò–Ω—Ñ—Ä–∞–∫—Ä–∞—Å–Ω–æ–µ
        ndvi: 'url...'               // –ò–Ω–¥–µ–∫—Å —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    },
    metadata: {                      // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
        satellite: 'Sentinel-2A',
        resolution: '10m',
        processingLevel: 'L2A'
    }
}
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (Statistics):

```javascript
{
    averageNDVI: 0.65,              // –°—Ä–µ–¥–Ω–∏–π NDVI (0-1)
    area: 1250.5,                   // –ü–ª–æ—â–∞–¥—å –≤ –∫–º¬≤
    cloudCoverage: 12,              // –°—Ä–µ–¥–Ω—è—è –æ–±–ª–∞—á–Ω–æ—Å—Ç—å
    lastUpdate: '2024-12-05',       // –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    vegetation: {                   // –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
        forest: 45,                 // % –ª–µ—Å–∞
        agriculture: 35,            // % —Å–µ–ª—å—Ö–æ–∑ –∑–µ–º–µ–ª—å
        urban: 15,                  // % –≥–æ—Ä–æ–¥–æ–≤
        water: 5                    // % –≤–æ–¥—ã
    }
}
```

---

## üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API

–ö–æ–≥–¥–∞ backend –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤, –ø—Ä–æ—Å—Ç–æ –∏–∑–º–µ–Ω–∏ –≤ `api.js`:

```javascript
// –ë—ã–ª–æ:
const USE_MOCK_DATA = true;

// –°—Ç–∞–Ω–µ—Ç:
const USE_MOCK_DATA = false;
```

–ò –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–π–¥—É—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä! üéâ

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ API –º–æ–¥—É–ª—å —Å–æ–∑–¥–∞–Ω
2. üîú –°–æ–∑–¥–∞—Ç—å `layers.js` - –º–æ–¥—É–ª—å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ª–æ–µ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ
3. üîú –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å API —Å –∫–∞—Ä—Ç–æ–π
4. üîú –î–æ–±–∞–≤–∏—Ç—å popup —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–Ω–∏–º–∫–µ

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏

```javascript
// –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ mock-–¥–∞–Ω–Ω—ã–µ
SatelliteAPI.MOCK_SATELLITE_DATA

// –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å mock-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
SatelliteAPI.MOCK_STATISTICS

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ª–∏ mock-–¥–∞–Ω–Ω—ã–µ
SatelliteAPI.USE_MOCK_DATA

// –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
await SatelliteAPI.fetchSatelliteData({})

// –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
await SatelliteAPI.fetchStatistics({})

// –ü–æ–∏—Å–∫ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
await SatelliteAPI.searchByCoordinates(48.6692, 19.6987, 20)
```

---

**–ü–æ–ø—Ä–æ–±—É–π –∫–æ–º–∞–Ω–¥—ã –≤ –∫–æ–Ω—Å–æ–ª–∏ –∏ —Å–∫–∞–∂–∏ —á—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å!** üöÄ
