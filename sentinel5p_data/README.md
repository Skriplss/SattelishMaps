# üõ∞Ô∏è Sentinel-5P NO‚ÇÇ Data Pipeline

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –æ –¥–∏–æ–∫—Å–∏–¥–µ –∞–∑–æ—Ç–∞ (NO‚ÇÇ) —Å–æ —Å–ø—É—Ç–Ω–∏–∫–∞ Sentinel-5P.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

```
sentinel5p_data/
‚îú‚îÄ‚îÄ raw_data/           # –°—ã—Ä—ã–µ NetCDF —Ñ–∞–π–ª—ã —Å–æ —Å–ø—É—Ç–Ω–∏–∫–∞
‚îú‚îÄ‚îÄ processed_data/     # –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (JSON, PNG –∫–∞—Ä—Ç—ã)
‚îú‚îÄ‚îÄ scripts/            # –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ download_no2_data.py    # –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API
‚îÇ   ‚îî‚îÄ‚îÄ process_no2_data.py     # –û–±—Ä–∞–±–æ—Ç–∫–∞ NetCDF —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ requirements.txt    # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îî‚îÄ‚îÄ README.md          # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd sentinel5p_data
pip install -r requirements.txt
```

### 2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Copernicus

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º Sentinel-5P –Ω–µ–æ–±—Ö–æ–¥–∏–º –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç:

1. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ [Copernicus Data Space](https://dataspace.copernicus.eu/)
2. –°–æ–∑–¥–∞–π –∞–∫–∫–∞—É–Ω—Ç (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
3. –ó–∞–ø–æ–º–Ω–∏ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å

### 3. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–û—Ç–∫—Ä–æ–π `scripts/download_no2_data.py` –∏ —É–∫–∞–∂–∏ —Å–≤–æ–∏ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

```python
USERNAME = '—Ç–≤–æ–π_–ª–æ–≥–∏–Ω'
PASSWORD = '—Ç–≤–æ–π_–ø–∞—Ä–æ–ª—å'
```

–ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç:

```bash
cd scripts
python download_no2_data.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:**
- üîç –ò—â–µ—Ç –¥–∞–Ω–Ω—ã–µ NO‚ÇÇ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é
- üá∫üá¶ –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ –æ–±–ª–∞—Å—Ç–∏ –£–∫—Ä–∞–∏–Ω—ã
- üì• –ó–∞–≥—Ä—É–∂–∞–µ—Ç NetCDF —Ñ–∞–π–ª—ã –≤ `raw_data/`

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∞–π –¥–∞–Ω–Ω—ã–µ:

```bash
python process_no2_data.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:**
- üìÇ –ß–∏—Ç–∞–µ—Ç –≤—Å–µ NetCDF —Ñ–∞–π–ª—ã –∏–∑ `raw_data/`
- üî¨ –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏ NO‚ÇÇ
- üìä –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- üó∫Ô∏è –°–æ–∑–¥–∞–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é (–∫–∞—Ä—Ç—ã)
- üíæ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ JSON

## üìä –û –¥–∞–Ω–Ω—ã—Ö NO‚ÇÇ

**–î–∏–æ–∫—Å–∏–¥ –∞–∑–æ—Ç–∞ (NO‚ÇÇ)** ‚Äî —ç—Ç–æ –∑–∞–≥—Ä—è–∑–Ω–∏—Ç–µ–ª—å –≤–æ–∑–¥—É—Ö–∞, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–∑—É–µ—Ç—Å—è –æ—Ç:
- üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ (–≤—ã—Ö–ª–æ–ø–Ω—ã–µ –≥–∞–∑—ã)
- üè≠ –ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏
- ‚ö° –≠–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏–π
- üî• –°–∂–∏–≥–∞–Ω–∏—è —Ç–æ–ø–ª–∏–≤–∞

**Sentinel-5P** –∏–∑–º–µ—Ä—è–µ—Ç —Ç—Ä–æ–ø–æ—Å—Ñ–µ—Ä–Ω—É—é –∫–æ–ª–æ–Ω–∫—É NO‚ÇÇ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º ~5.5√ó3.5 –∫–º.

**–ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è:**
- –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ: `mol/m¬≤`
- –í —Å–∫—Ä–∏–ø—Ç–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤: `¬µmol/m¬≤` (–º–∏–∫—Ä–æ–º–æ–ª—å –Ω–∞ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π –º–µ—Ç—Ä)

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–∏—Å–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ–±–ª–∞—Å—Ç–∏ –ø–æ–∏—Å–∫–∞

–í `download_no2_data.py` –º–æ–∂–µ—à—å –∑–∞–¥–∞—Ç—å —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å:

```python
# –§–æ—Ä–º–∞—Ç: (lon_min, lat_min, lon_max, lat_max)
my_area_coords = (30.0, 50.0, 31.0, 51.0)  # –ö–∏–µ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å

products = downloader.search_no2_data(
    start_date='2024-12-01',
    end_date='2024-12-05',
    area_coords=my_area_coords,
    max_results=10
)
```

### –ü–æ–∏—Å–∫ –¥–ª—è –≥–æ—Ä–æ–¥–∞

```python
# –ö–∏–µ–≤ (—Å –±—É—Ñ–µ—Ä–æ–º ~50–∫–º)
kyiv_coords = (30.2, 50.2, 30.8, 50.7)

# –õ—å–≤–æ–≤
lviv_coords = (23.8, 49.7, 24.2, 50.0)

# –û–¥–µ—Å—Å–∞
odessa_coords = (30.5, 46.3, 30.9, 46.6)
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞

```python
from datetime import date, timedelta

# –ü–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü
end_date = date.today()
start_date = end_date - timedelta(days=30)

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞—Ç—ã
start_date = date(2024, 11, 1)
end_date = date(2024, 11, 30)
```

## üìà –ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ `processed_data/` –ø–æ—è–≤—è—Ç—Å—è:

### 1. JSON —Ñ–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏
```json
{
  "metadata": {
    "source_file": "S5P_RPRO_L2__NO2____2024...nc",
    "processing_date": "2024-12-05T21:00:00",
    "units": "¬µmol/m¬≤",
    "shape": [450, 450]
  },
  "statistics": {
    "mean": 5.23,
    "median": 4.87,
    "std": 2.45,
    "min": 0.12,
    "max": 45.67
  }
}
```

### 2. PNG –∫–∞—Ä—Ç–∞
–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è NO‚ÇÇ —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π:
- üîµ –°–∏–Ω–∏–π = –Ω–∏–∑–∫–∞—è –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è (—á–∏—Å—Ç—ã–π –≤–æ–∑–¥—É—Ö)
- üü° –ñ–µ–ª—Ç—ã–π = —Å—Ä–µ–¥–Ω—è—è –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è
- üî¥ –ö—Ä–∞—Å–Ω—ã–π = –≤—ã—Å–æ–∫–∞—è –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è (–∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–µ)

## üîç –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ù–æ—Ä–º–∞–ª—å–Ω—ã–µ —É—Ä–æ–≤–Ω–∏:**
- –ß–∏—Å—Ç—ã–µ —Ä–∞–π–æ–Ω—ã: < 2 ¬µmol/m¬≤
- –ì–æ—Ä–æ–¥—Å–∫–∏–µ —Ä–∞–π–æ–Ω—ã: 2-10 ¬µmol/m¬≤
- –ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–µ –∑–æ–Ω—ã: 10-30 ¬µmol/m¬≤
- –°–∏–ª—å–Ω–æ–µ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–µ: > 30 ¬µmol/m¬≤

**–ß—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é:**
- üöó –¢—Ä–∞—Ñ–∏–∫ –≤ –≥–æ—Ä–æ–¥–∞—Ö (—É—Ç—Ä–µ–Ω–Ω–∏–µ/–≤–µ—á–µ—Ä–Ω–∏–µ —á–∞—Å—ã –ø–∏–∫)
- üè≠ –ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è
- üå§Ô∏è –ü–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è (–≤–µ—Ç–µ—Ä, –¥–æ–∂–¥—å —Å–Ω–∏–∂–∞—é—Ç –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é)
- üìÖ –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ (–±—É–¥–Ω–∏ vs –≤—ã—Ö–æ–¥–Ω—ã–µ)
- üåç –°–µ–∑–æ–Ω (–∑–∏–º–∞ –æ–±—ã—á–Ω–æ –≤—ã—à–µ –∏–∑-–∑–∞ –æ—Ç–æ–ø–ª–µ–Ω–∏—è)

## ‚öôÔ∏è –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å)

–°–æ–∑–¥–∞–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏:

**Windows (Task Scheduler):**
```bash
# –°–æ–∑–¥–∞–π .bat —Ñ–∞–π–ª
cd d:\Projects\V-Axis\SattelishMaps\sentinel5p_data\scripts
python download_no2_data.py
```

**Linux/Mac (cron):**
```bash
# –î–æ–±–∞–≤—å –≤ crontab
0 2 * * * cd /path/to/scripts && python download_no2_data.py
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase

–ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

```python
from supabase import create_client

supabase = create_client(SUPABASE_URL, SUPABASE_KEY)

# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
supabase.table('no2_measurements').insert({
    'date': '2024-12-05',
    'area': 'Ukraine',
    'mean_no2': 5.23,
    'max_no2': 45.67,
    'data_source': 'Sentinel-5P'
}).execute()
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "Authentication failed"
- –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ –∞–∫–∫–∞—É–Ω—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω (–ø—Ä–æ–≤–µ—Ä—å email)

### –û—à–∏–±–∫–∞ "No products found"
- –†–∞—Å—à–∏—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–µ—Ä–∏–æ–¥ –ø–æ–∏—Å–∫–∞
- –£–º–µ–Ω—å—à–∏ –æ–±–ª–∞—Å—Ç—å –ø–æ–∏—Å–∫–∞
- –ü—Ä–æ–≤–µ—Ä—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (lat: -90 –¥–æ 90, lon: -180 –¥–æ 180)

### –§–∞–π–ª—ã –Ω–µ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- –£ Copernicus –º–æ–≥—É—Ç –±—ã—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏
- –ü–æ–ø—Ä–æ–±—É–π —Å–∫–∞—á–∏–≤–∞—Ç—å –º–µ–Ω—å—à–µ —Ñ–∞–π–ª–æ–≤ –∑–∞ —Ä–∞–∑

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ NetCDF
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫–∞—á–∞–ª–∏—Å—å
- –£—Å—Ç–∞–Ω–æ–≤–∏ `netCDF4`: `pip install netCDF4`
- –ü—Ä–æ–≤–µ—Ä—å –≤–µ—Ä—Å–∏—é —Ñ–∞–π–ª–∞ (—Å–∫—Ä–∏–ø—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Level 2 –ø—Ä–æ–¥—É–∫—Ç—ã)

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Sentinel-5P](https://sentinels.copernicus.eu/web/sentinel/missions/sentinel-5p)
- [Copernicus Data Space](https://dataspace.copernicus.eu/)
- [Sentinelsat –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://sentinelsat.readthedocs.io/)
- [NO‚ÇÇ Product Guide](https://sentinels.copernicus.eu/documents/247904/3541451/Sentinel-5P-Nitrogen-Dioxide)

## üí° –ò–¥–µ–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è

1. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
   - –°–æ–∑–¥–∞–π –¥–∞—à–±–æ—Ä–¥ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
   - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã —Å Leaflet.js

2. **–ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤**
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π NO‚ÇÇ –ø–æ –º–µ—Å—è—Ü–∞–º
   - –í—ã—è–≤–ª–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π (–ø–æ–∂–∞—Ä—ã, –∞–≤–∞—Ä–∏–∏)

3. **Alerts —Å–∏—Å—Ç–µ–º–∞**
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–æ–≤
   - Email/Telegram –±–æ—Ç—ã

4. **Machine Learning**
   - –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è
   - –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Å –ø–æ–≥–æ–¥–æ–π, —Ç—Ä–∞—Ñ–∏–∫–æ–º

## üìù License

MIT License - –∏—Å–ø–æ–ª—å–∑—É–π —Å–≤–æ–±–æ–¥–Ω–æ –¥–ª—è —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤!

---

**–°–æ–∑–¥–∞–Ω–æ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ V-Axis SatelliteMaps** üõ∞Ô∏è
